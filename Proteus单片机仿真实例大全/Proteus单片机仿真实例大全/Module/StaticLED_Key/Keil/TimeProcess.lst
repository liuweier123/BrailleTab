C51 COMPILER V8.05a   TIMEPROCESS                                                          07/31/2007 17:04:20 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE TIMEPROCESS
OBJECT MODULE PLACED IN TimeProcess.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE sources\TimeProcess.c BROWSE INCDIR(.\include) DEBUG OBJECTEXTEND PRINT(.\T
                    -imeProcess.lst) OBJECT(TimeProcess.obj)

line level    source

   1          //*************************************************************************************************
   2          //*                                                                                                                                                                                               *
   3          //*              ********************************计时状态处理子函数******************************                 *
   4          //*                                                                                                                                                                                               *
   5          //*************************************************************************************************
   6          #include "Show.h" 
   7          
   8          bit b_CountStart=0;
   9          bit b_CountPause=0;
  10          extern bit b_ClockStart;
  11          extern bit b_KeyShock;
  12          unsigned int ui_TimeTemp;                 //暂停状态技计数暂存。
  13          extern unsigned int ui_Clock;
  14          
  15          
  16          void vTime(unsigned char ucKeyCode)
  17          {
  18   1                      switch(ucKeyCode)
  19   1                              {
  20   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  21   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<当按下“NO/C”时执行>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  22   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  23   2                              case 41:
  24   2      //***************************************00 ->10：从停止到开始**************************************** 
  25   2                                      if((b_CountStart|b_CountPause)==0)                              
  26   2                                              {       
  27   3                                              vShowNumber(0);                                                         //初始化记时值为0.
  28   3                                              b_CountStart=1;                                                         //重设标志位，改为开始状态；
  29   3                                              b_ClockStart=1;                                                 
  30   3                                              }
  31   2      //***************************************11 ->10：从暂停到开始****************************************
  32   2                                              else if((b_CountStart&b_CountPause)==1)
  33   2                                                      {
  34   3                                                      vShowNumber(ui_TimeTemp);                                       //初始化初值为暂存的值。
  35   3                                                      b_CountPause=0;                                                 //重设标志位，改为开始状态。
  36   3                                                      b_ClockStart=1; 
  37   3                                                              
  38   3                                                      }
  39   2      //***************************************10 ->00：从开始到停止****************************************
  40   2                                               else if((b_CountStart=1&(!b_CountPause))==1)   
  41   2                                                              {
  42   3                                                              b_CountStart=0;                                                 //重设标志位，改为停止状态。
  43   3                                                              b_ClockStart=0;                                                 //停止计时。
  44   3                                                              vShowNumber(0);                                                 //恢复计时前状态。      
  45   3                                                              }
  46   2                                      break;
  47   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>                          
             -                  
  48   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<当按下“=”时执行>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  49   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  50   2                              case 43: 
  51   2                                      if(b_CountStart==1)                                                             //如果是开始或暂停状态则进行处理，
  52   2                                              {                                                                                       //否则不处理。
  53   3                                              //*******************************10->11:从开始到暂停。****************************
C51 COMPILER V8.05a   TIMEPROCESS                                                          07/31/2007 17:04:20 PAGE 2   

  54   3                                              if(b_CountPause==0)                                                     
  55   3                                                      {                                                                               //保存计时数值。
  56   4                                                      b_CountPause=1;                                                 //如果是开始状态则改为暂停状态。
  57   4                                                      ui_TimeTemp=ui_Clock;
  58   4      
  59   4                                                      b_ClockStart=0;                                                 //暂停计时。
  60   4                                                      }
  61   3                                              else
  62   3                                                      {                       //**************************11 ->10：从暂停到开始*****************                                                                                              
  63   4                                                       b_CountPause=0;                                                //如果是暂停状态则改变为进行状态。
  64   4                                                       vShowNumber(ui_TimeTemp);                                      //给计时器赋初值为暂停前的值。
  65   4                                                       b_ClockStart=1;
  66   4      
  67   4                                                      }                       //****************************************************************
  68   3                                              }
  69   2      
  70   2                                      break;
  71   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>                          
             -                  
  72   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<当按下“+”时执行>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  73   2      //<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  74   2                                      case 44:
  75   2                                      {
  76   3                                      b_ClockStart=0;                  //停止计时。
  77   3                                      //******************************切换到倒计时模式*******************************
  78   3                                      b_CountStart=0;         
  79   3                                      b_CountPause=1;
  80   3                                      vShowNumber(0);
  81   3                                      }
  82   2                                      break;
  83   2                              default:break;
  84   2                              }
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    102    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
