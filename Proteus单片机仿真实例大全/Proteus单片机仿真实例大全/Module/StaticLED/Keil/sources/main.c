//*************************************************************************************************
//*************************************************************************************************
//**<程序名>：LED静态显示																		 **
//**<功能>：使用74LS164向LED串行传送数据。														 **
//**<作者>：LastRitter																			 **
//**<完成时间>：2007年7月31日																	 **
//**<联系方式>：E-Mail:superyongzhe@163.com;QQ:314665345。										 **
//*************************************************************************************************
//*************************************************************************************************


//*************************************************************************************************
//*																								  *
//*			 ******************************头文件及宏定义**************************				  *
//*																								  *
//*************************************************************************************************
#include "includes.h"


#define TIME0H 0x40
#define TIME0L 0x98				 //49ms


//*************************************************************************************************
//*																								  *
//*			  ********************************全局变量******************************			  *
//*																								  *
//*************************************************************************************************
unsigned char uc_TimeCount=0;
unsigned int ui_Number=0;

//*************************************************************************************************
//*																								  *
//*			  ********************************主函数******************************				  *
//*																								  *
//*************************************************************************************************
void main()
{

//<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<设置串口模式>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	SM0=0;					   //模式0
	SM1=0;


//<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<设置定时器0>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	TMOD=0x01;				 //定时器0：模式1
	TH0=TIME0H;
	TL0=TIME0L;
	TR0=1;
	ET0=1;

	EA=1;

//<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<主循环>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	while(1);
}


//*************************************************************************************************
//*																								  *
//*			  ***********************定时器0中断，用于刷新计数*********************				  *
//*																								  *
//*************************************************************************************************
void vTimer0() interrupt 1
{
	if(uc_TimeCount==0)
		{
		uc_TimeCount=19;
		vShowNumber(ui_Number++);
		}
	else uc_TimeCount--;


//<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<回复定时器>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>		
	TH0=TIME0H;
	TL0=TIME0L;
}